
참고 자료
* [MDN [교차 출처 리소스 공유 (CORS)](https://developer.mozilla.org/ko/docs/Web/HTTP/Guides/CORS)](https://developer.mozilla.org/ko/docs/Web/HTTP/Guides/CORS?utm_source=chatgpt.com)



##### 교차 출처란

프로토콜, 호스트(도메인), 포트 중 하나라도 다른 것을 의미한다.

![[Pasted image 20251123175912.png]](images/Pasted%20image%2020251123175912.png)

주로 CSR을 사용할 경우, 백앤드 서버와 출처가 다른 경우가 많기에 대부분 교차 출처에 해당한다.

교차출처 환경에서는 자격증명 요청이 기본적으로 차단된다.

##### 자격증명 요청

- 자격증명 요청이란 문맥적으로는 인가된 사용자임을 증명하는 요청
- HTTP 에서는 헤더에 쿠키 혹은 `Authorization` 헤더 값을 포함한 요청을 의미한다.
- 클라이언트(웹)단에서 `aixos` 를 예시로 들면 `withCredentials: true` 로 지정할 경우, 자동으로 쿠키를 포함해 요청을 보낸다.
```js
const ax = axios.create({  
    baseURL: "http://localhost:8080", 
    withCredentials: true,      
    //...
});
```

### Access-Controller-Allow-Credentials

---
요청을 처리하는 서버단에서는 CORS 상황에 대해서 요청 허용을 위해 우선 
`Access-Controller-Allow-Credentials` 헤더 값을 `true` 로 지정해야 한다.

![[Pasted image 20251123182638.png]](images/Pasted%20image%2020251123182638.png)

정리하면 해당 헤더의 역할은 다음과 같다.
`Access-Controller-Allow-Credentials` :  자격증명(쿠키, `authorization` 등) 모드일 때, 브라우저가 응답을 프런트앤드 자바스크립트 코드에 노출할지에 대한 여부

여기서 한 가지 의문이 들 수도 있는데 브라우저의 응답 제어를 서버에서 정하는 것인지인데 이게 바로 브라우저 보안 정책 중 하나인 CORS 이다.

다시 말해, 서버가 자신이 소유한 자원을 어떤 출처의 브라우저에게 허용할지 정하는 것이다. 

### Access-Control-Allow-Headers, Access-Control-Expose-Headers
---
- Access-Control-Allow-Headers : 요청으로 보내도 되는 헤더들, 다시 말해 해당 속성에 명시된 헤더만 브라우저가 서버에 보냄

- Access-Control-Expose-Headers :  응답 헤더 중 브라우저 내 자바스크립트에 노출해도 되는 헤더들
	![[Pasted image 20251214155534.png]](images/Pasted%20image%2020251214155534.png)

	![[Pasted image 20251214155559.png]](images/Pasted%20image%2020251214155559.png)
	해당 요청을 응답받은 브라우저에서 헤더에 접근해서 값을 접근해보면 `jxx-autorization` 은 접근이 불가해 `undefined` 이다.
	![[Pasted image 20251214155637.png]](images/Pasted%20image%2020251214155637.png)
